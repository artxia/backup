(function(t){function e(e){for(var n,a,u=e[0],s=e[1],c=e[2],p=0,d=[];p<u.length;p++)a=u[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,u=1;u<r.length;u++){var s=r[u];0!==o[s]&&(n=!1)}n&&(i.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},o={app:0},i=[];function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="https://cdn.jsdelivr.net/gh/Tsuk1ko/cfworker-url-shortener@gh-pages/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var c=0;c<u.length;c++)e(u[c]);var l=s;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("8bbf"),o=r.n(n),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{class:{"small-screen":t.smallScreen}},[r("v-main",[r("v-layout",{attrs:{id:"app",column:"","align-center":"","justify-center":""}},[r("div",{attrs:{id:"nav"}},[r("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({attrs:{icon:""},on:{click:t.goToGitHub}},"v-btn",o,!1),n),[r("v-icon",{attrs:{color:"black",size:"32"}},[t._v("mdi-github")])],1)]}}])},[r("span",[t._v("GitHub")])])],1),r("div",{staticClass:"text-h3 text-sm-h2 mb-12",staticStyle:{"font-weight":"300"}},[t._v(t._s(t.title))]),r("div",{attrs:{id:"url-input"}},[r("v-text-field",{attrs:{rules:[t.urlRule],disabled:t.loading,dense:t.smallScreen,type:"url",placeholder:"http(s)://",autocomplete:"off","validate-on-blur":"",filled:"",rounded:"",clearable:""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.shortenUrl(e)}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[r("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:t.canNotShorten,"x-large":!t.smallScreen,rounded:"",depressed:""},on:{click:t.shortenUrl}},[t._v("短它！")])]},proxy:!0}]),model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),r("div",{class:{"no-result":!t.shortenedUrl},attrs:{id:"shorten-result"}},[r("v-text-field",{attrs:{value:t.shortenedUrl,type:"text",readonly:"","append-outer-icon":"mdi-content-copy"},on:{"click:append-outer":t.copyResult,focus:t.onShortResultFocus}}),r("v-tooltip",{attrs:{activator:"#shorten-result .v-input__icon--append-outer",right:""}},[r("span",[t._v(t._s(t.showCopiedTooltip?t.copySuccess?"已复制":"复制失败":"复制"))])])],1),r("snackbar",{ref:"snackbar"})],1)],1)],1)},a=[],u=(r("d3b7"),r("25f0"),r("498a"),r("96cf"),r("1da1")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-snackbar",t._b({model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},"v-snackbar",t.$attrs,!1),[t._v(t._s(t.text))])},c=[],l={name:"snackbar",data:function(){return{isShow:!1,text:""}},methods:{show:function(t){this.text=t,this.isShow=!0}}},p=l,d=r("2877"),f=r("6544"),h=r.n(f),v=r("2db4"),b=Object(d["a"])(p,s,c,!1,null,null,null),m=b.exports;h()(b,{VSnackbar:v["a"]});var y=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(navigator&&"permissions"in navigator&&"clipboard"in navigator){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,navigator.permissions.query({name:e});case 4:if(r=t.sent.state,"granted"===r||"prompt"===r){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y("clipboard-write");case 2:if(!t.sent){t.next=5;break}return navigator.clipboard.writeText(e),t.abrupt("return",!0);case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=/^https?:\/\/[\w_-]+(\.[\w_-]+)+[!-~]*$|^$/,k={name:"App",components:{Snackbar:m},data:function(){return{title:location.hostname,loading:!1,url:"",lastUrl:"",shortenedUrl:"",showCopiedTooltip:!1,copiedTooltipTimeout:null,copySuccess:!0}},computed:{trimedUrl:function(){return(this.url||"").trim()},isUrlValid:function(){return w.test(this.trimedUrl)},canNotShorten:function(){return this.loading||!this.trimedUrl||!this.isUrlValid},smallScreen:function(){return this.$vuetify.breakpoint.xs}},methods:{urlRule:function(){return this.isUrlValid||"不是有效的网址"},shortenUrl:function(){var t=this;if(!this.canNotShorten&&this.trimedUrl!==this.lastUrl)return this.shortenedUrl="",this.loading=!0,fetch("/shorten",{method:"POST",body:JSON.stringify({url:this.trimedUrl}),headers:{"content-type":"application/json"}}).then((function(t){return t.json()})).then((function(e){var r=e.code,n=e.msg,o=e.url;if(0!==r)throw new Error(n);t.shortenedUrl=o,t.lastUrl=t.trimedUrl})).catch((function(e){t.$refs.snackbar.show(e.toString())})).finally((function(){t.loading=!1}))},copyResult:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g(t.shortenedUrl);case 2:t.copySuccess=e.sent,t.showCopiedTooltip=!0,t.copiedTooltipTimeout&&clearTimeout(t.copiedTooltipTimeout),t.copiedTooltipTimeout=setTimeout((function(){t.showCopiedTooltip=!1,t.copiedTooltipTimeout=null}),3e3);case 6:case"end":return e.stop()}}),e)})))()},onShortResultFocus:function(){var t=document.querySelector("#shorten-result input");t.selectionStart=0,t.selectionEnd=t.value.length},goToGitHub:function(){window.open("https://github.com/Tsuk1ko/cfworker-url-shortener","_blank")}}},x=k,S=(r("5c0b"),r("7496")),_=r("8336"),T=r("132d"),U=r("a722"),O=r("f6c4"),j=r("8654"),R=r("3a2f"),V=Object(d["a"])(x,i,a,!1,null,null,null),P=V.exports;h()(V,{VApp:S["a"],VBtn:_["a"],VIcon:T["a"],VLayout:U["a"],VMain:O["a"],VTextField:j["a"],VTooltip:R["a"]});var $=r("f309"),C=r("fcf4");o.a.use($["a"]);var E=new $["a"]({theme:{themes:{light:{primary:C["a"].lightBlue.base}}}});o.a.config.productionTip=!1,new o.a({vuetify:E,render:function(t){return t(P)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"8bbf":function(t,e){t.exports=Vue},"9c0c":function(t,e,r){}});